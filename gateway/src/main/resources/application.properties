spring.application.name=gateway
server.port=8080

# ??nh ngh?a route chuy?n ti?p các yêu c?u có ???ng d?n b?t ??u b?ng /api/identities/**
# ??n d?ch v? identity-service t?i http://localhost:8081
spring.cloud.gateway.routes[0].id=identity-service
spring.cloud.gateway.routes[0].uri=http://localhost:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/identities/**

# Xóa b? 2 ph?n t? ??u tiên trong path (ví d?: /api/identities -> /identities) khi forward request
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=2

# Thêm header X-Debug:true vào request (dùng cho m?c ?ích debug, có th? b? qua n?u không c?n)
spring.cloud.gateway.routes[0].filters[1]=AddRequestHeader=X-Debug,true

# C?u hình CORS cho t?t c? các endpoint (/**)
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOrigins=http://localhost:8080,http://localhost:3000
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=GET,POST,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowCredentials=true

# B? l?c m?c ??nh ?? lo?i b? các header Access-Control-Allow-Origin và Access-Control-Allow-Methods trùng l?p trong response
spring.cloud.gateway.default-filters=DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Methods

# C?u hình m?c ?? log chi ti?t cho các package liên quan t?i Gateway và Reactor Netty
logging.level.org.springframework.cloud.gateway=TRACE
logging.level.org.springframework.web=TRACE
logging.level.reactor.netty=DEBUG
logging.level.com.gateway=DEBUG
